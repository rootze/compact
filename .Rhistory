shiny::runApp()
runApp()
runApp()
runApp()
Visit.1 <- read.delim("~/Desktop/Visit 1.txt")
View(Visit.1)
df_subset <-read.delim("~/Desktop/Visit 1.txt")
"premature_trial" = df_subset %>%
group_by(Animal, DateTime) %>%
summarize(Daily_Premature = sum(IR_PrematureTrials, na.rm = TRUE), .groups = "drop") %>%
# Now get the MAX per mouse across all days
group_by(Animal) %>%
summarize(Max_Premature_Per_Day = max(Daily_Premature, na.rm = TRUE), .groups = "drop"),
# Select relevant columns (added Module column)
df_subsetall <- df[, c('VisitOrder', 'LickNumber', 'NosepokeNumber', 'CornerCondition', 'Animal', 'StartDate', 'StartTime', 'Module', 'IR_PrematureTrials')]
df <-read.delim("~/Desktop/Visit 1.txt")
df <-read.delim("~/Desktop/Visit 1.txt")
# Select relevant columns (added Module column)
df_subsetall <- df[, c('VisitOrder', 'LickNumber', 'NosepokeNumber', 'CornerCondition', 'Animal', 'StartDate', 'StartTime', 'Module', 'IR_PrematureTrials')]
df_subsetall$StartDate <- as.Date(df_subsetall$StartDate, format = "%Y-%m-%d")
df_subsetall$DateTime <- as.POSIXct(paste(df_subsetall$StartDate, df_subsetall$StartTime),
format = "%Y-%m-%d %H:%M:%OS")
df_subset <- df_subsetall[, c('VisitOrder', 'LickNumber', 'NosepokeNumber', 'CornerCondition', 'Animal', 'DateTime', 'Module')]
"premature_trial" = df_subset %>%
group_by(Animal, DateTime) %>%
summarize(Daily_Premature = sum(IR_PrematureTrials, na.rm = TRUE), .groups = "drop") %>%
# Now get the MAX per mouse across all days
group_by(Animal) %>%
summarize(Max_Premature_Per_Day = max(Daily_Premature, na.rm = TRUE), .groups = "drop"),
"premature_trial" = df_subset %>%
group_by(Animal, DateTime) %>%
summarize(Daily_Premature = sum(IR_PrematureTrials, na.rm = TRUE), .groups = "drop") %>%
# Now get the MAX per mouse across all days
group_by(Animal) %>%
summarize(Max_Premature_Per_Day = max(Daily_Premature, na.rm = TRUE), .groups = "drop")
premature_trial = df_subset %>%
group_by(Animal, DateTime) %>%
summarize(Daily_Premature = sum(IR_PrematureTrials, na.rm = TRUE), .groups = "drop") %>%
# Now get the MAX per mouse across all days
group_by(Animal) %>%
summarize(Max_Premature_Per_Day = max(Daily_Premature, na.rm = TRUE), .groups = "drop")
colnames(df)
premature_trial = df_subset %>%
group_by(Animal, DateTime)
View(premature_trial)
df <-read.delim("~/Desktop/Visit 1.txt")
# Select relevant columns (added Module column)
df_subsetall <- df[, c('VisitOrder', 'LickNumber', 'NosepokeNumber', 'CornerCondition', 'Animal', 'StartDate', 'StartTime', 'Module', 'IR_PrematureTrials')]
df_subsetall$StartDate <- as.Date(df_subsetall$StartDate, format = "%Y-%m-%d")
df_subsetall$DateTime <- as.POSIXct(paste(df_subsetall$StartDate, df_subsetall$StartTime),
format = "%Y-%m-%d %H:%M:%OS")
df_subset <- df_subsetall[, c('VisitOrder', 'LickNumber', 'NosepokeNumber', 'CornerCondition', 'Animal', 'DateTime', 'Module', 'IR_PrematureTrials')]
premature_trial = df_subset %>%
group_by(Animal, DateTime) %>%
summarize(Daily_Premature = sum(IR_PrematureTrials, na.rm = TRUE), .groups = "drop") %>%
# Now get the MAX per mouse across all days
group_by(Animal) %>%
summarize(Max_Premature_Per_Day = max(Daily_Premature, na.rm = TRUE), .groups = "drop")
runApp()
View(premature_trial)
runApp()
runApp()
runApp()
visit_data <- read_delim("~/Desktop/Visit 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
nosepoke_data <- read_delim("~/Desktop/Nosepoke 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
visit_data <- read_delim("~/Desktop/Visit 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
nosepoke_data <- read_delim("~/Desktop/Nosepoke 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
visit_data$StartDate <- as.Date(visit_data$StartDate, format = "%Y-%m-%d")
visit_data$DateTime <- as.POSIXct(paste(visit_data$StartDate, visit_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
View(visit_data)
runApp()
runApp()
View(nosepoke_data)
runApp()
runApp()
runApp()
runApp()
runApp()
visit_data <- read_delim("~/Desktop/Visit 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
nosepoke_data <- read_delim("~/Desktop/Nosepoke 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
visit_data$StartDate <- as.Date(visit_data$StartDate, format = "%Y-%m-%d")
visit_data$DateTime <- as.POSIXct(paste(visit_data$StartDate, visit_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
# Convert input$date_time_rt to Date object (for daily granularity)
#start_date <- as.Date(as.POSIXct(input$date_time_rt))  # ðŸ”¥ key line
start_date <- as.POSIXct("2024-02-26 10:00:00")
# Filter by date after the threshold
visit_data <- visit_data %>% filter(StartDate >= start_date)
View(visit_data)
View(visit_data)
visit_data <- read_delim("~/Desktop/Visit 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
nosepoke_data <- read_delim("~/Desktop/Nosepoke 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
visit_data$StartDate <- as.Date(visit_data$StartDate, format = "%Y-%m-%d")
visit_data$DateTime <- as.POSIXct(paste(visit_data$StartDate, visit_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
# Convert input$date_time_rt to Date object (for daily granularity)
#start_date <- as.Date(as.POSIXct(input$date_time_rt))  # ðŸ”¥ key line
start_date <- as.POSIXct("2024-02-26 10:00:00")
View(visit_data)
View(nosepoke_data)
# Filter by date after the threshold
visit_data <- visit_data %>% filter(DateTime >= start_date)
View(visit_data)
visit_data <- read_delim("~/Desktop/Visit 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
nosepoke_data <- read_delim("~/Desktop/Nosepoke 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
visit_data$StartDate <- as.Date(visit_data$StartDate, format = "%Y-%m-%d")
visit_data$DateTime <- as.POSIXct(paste(visit_data$StartDate, visit_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
# Convert input$date_time_rt to Date object (for daily granularity)
#start_date <- as.Date(as.POSIXct(input$date_time_rt))  # ðŸ”¥ key line
start_date <- as.POSIXct("2024-02-26 10:00:00")
# Filter by date after the threshold
visit_data <- visit_data %>% filter(StartDate >= start_date) # DateTime
df_inprogress <- visit_data %>%
filter(Module == "SRT" & NosepokeNumber > 0 & CornerCondition == "Correct") %>%
select(Animal, VisitID)
View(df_inprogress)
nosepoke_data$StartDate <- as.Date(nosepoke_data$StartDate, format = "%Y-%m-%d")
nosepoke_data$DateTime <- as.POSIXct(paste(nosepoke_data$StartDate, nosepoke_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
View(nosepoke_data)
# ðŸ”½ Add DayNum column: count how many 24-hr blocks since custom start time
nosepoke_data <- nosepoke_data %>%
filter(DateTime >= start_date) %>%
mutate(
DayNum = floor(as.numeric(difftime(DateTime, start_date, units = "days"))) + 1  # Day 1 starts from start_date
)
View(nosepoke_data)
# ðŸ”½ Add DayNum column: count how many 24-hr blocks since custom start time
nosepoke_data <- nosepoke_data %>%
filter(DateTime >= start_date) %>%
mutate(
DayNum = floor(as.numeric(difftime(DateTime, start_date, units = "days"))) + 1  # Day 1 starts from start_date
)
# Filter nosepoke data using the same DayNum threshold
nosepoke_data <- nosepoke_data %>% filter(DayNum >= 1)  # DayNum starts at 1
nosepoke_subset <- nosepoke_data %>%
semi_join(df_inprogress, by = c("Animal", "VisitID")) %>%
select(Animal, VisitID, NosepokeOrder, LickContactTime, DayNum, DateTime) %>%
filter(NosepokeOrder == 1 | NosepokeOrder == 0)
View(nosepoke_subset)
result <- nosepoke_subset %>%
pivot_wider(
id_cols = c(Animal, VisitID, DayNum),
names_from = NosepokeOrder,
values_from = LickContactTime,
names_prefix = "NP_"
) %>%
mutate(
NP_difference = NP_1 - NP_0
) %>%
filter(NP_difference >= 0 & !is.na(NP_difference)) %>%
group_by(Animal, DayNum) %>%
summarize(
Avg_NP_difference = mean(NP_difference, na.rm = TRUE),
.groups = 'drop'
)
View(result)
View(visit_data)
visit_data <- read_delim("~/Desktop/Visit 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
nosepoke_data <- read_delim("~/Desktop/Nosepoke 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
visit_data$StartDate <- as.Date(visit_data$StartDate, format = "%Y-%m-%d")
visit_data$DateTime <- as.POSIXct(paste(visit_data$StartDate, visit_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
# Convert input$date_time_rt to Date object (for daily granularity)
#start_date <- as.Date(as.POSIXct(input$date_time_rt))  # ðŸ”¥ key line
start_date <- as.POSIXct("2024-02-26 10:00:00")
# Filter by date after the threshold
visit_data <- visit_data %>% filter(StartDate >= start_date) # DateTime
df_inprogress <- visit_data %>%
filter(Module == "SRT" & NosepokeNumber > 0 & CornerCondition == "Correct") %>%
select(Animal, VisitID)
visit_data <- read_delim("~/Desktop/Visit 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
nosepoke_data <- read_delim("~/Desktop/Nosepoke 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
visit_data$StartDate <- as.Date(visit_data$StartDate, format = "%Y-%m-%d")
visit_data$DateTime <- as.POSIXct(paste(visit_data$StartDate, visit_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
# Convert input$date_time_rt to Date object (for daily granularity)
#start_date <- as.Date(as.POSIXct(input$date_time_rt))  # ðŸ”¥ key line
start_date <- as.POSIXct("2024-02-26 10:00:00")
# Filter by date after the threshold
visit_data <- visit_data %>% filter(StartDate >= start_date) # DateTime
df_inprogress <- visit_data %>%
filter(Module == "SRT" & NosepokeNumber > 0 & CornerCondition == "Correct") %>%
select(Animal, VisitID)
View(df_inprogress)
View(visit_data)
runApp()
visit_data <- read_delim("~/Desktop/Visit 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
nosepoke_data <- read_delim("~/Desktop/Nosepoke 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
visit_data$StartDate <- as.Date(visit_data$StartDate, format = "%Y-%m-%d")
visit_data$DateTime <- as.POSIXct(paste(visit_data$StartDate, visit_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
# Convert input$date_time_rt to Date object (for daily granularity)
#start_date <- as.Date(as.POSIXct(input$date_time_rt))  # ðŸ”¥ key line
start_date <- as.POSIXct("2024-02-26 10:00:00")
# Filter by date after the threshold
visit_data <- visit_data %>% filter(DateTime >= start_date) # DateTime or StartDate
df_inprogress <- visit_data %>%
filter(Module == "SRT" & NosepokeNumber > 0 & CornerCondition == "Correct") %>%
select(Animal, VisitID)
nosepoke_data$StartDate <- as.Date(nosepoke_data$StartDate, format = "%Y-%m-%d")
nosepoke_data$DateTime <- as.POSIXct(paste(nosepoke_data$StartDate, nosepoke_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
## Filter nosepoke data using the same daily threshold
# nosepoke_data <- nosepoke_data %>% filter(StartDate >= start_date)
# ðŸ”½ Add DayNum column: count how many 24-hr blocks since custom start time
nosepoke_data <- nosepoke_data %>%
filter(DateTime >= start_date) %>%
mutate(
DayNum = floor(as.numeric(difftime(DateTime, start_date, units = "days"))) + 1  # Day 1 starts from start_date
)
# Filter nosepoke data using the same DayNum threshold
nosepoke_data <- nosepoke_data %>% filter(DayNum >= 1)  # DayNum starts at 1
nosepoke_subset <- nosepoke_data %>%
semi_join(df_inprogress, by = c("Animal", "VisitID")) %>%
select(Animal, VisitID, NosepokeOrder, LickContactTime, DayNum, DateTime) %>%
filter(NosepokeOrder == 1 | NosepokeOrder == 0)
incProgress(0.4, detail = "Finalizing calculations...")
result <- nosepoke_subset %>%
pivot_wider(
id_cols = c(Animal, VisitID, DayNum),
names_from = NosepokeOrder,
values_from = LickContactTime,
names_prefix = "NP_"
) %>%
mutate(
NP_difference = NP_1 - NP_0
) %>%
filter(NP_difference >= 0 & !is.na(NP_difference)) %>%
group_by(Animal, DayNum) %>%
summarize(
Avg_NP_difference = mean(NP_difference, na.rm = TRUE),
.groups = 'drop'
)
View(result)
visit_data <- read_delim("~/Desktop/Visit 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
nosepoke_data <- read_delim("~/Desktop/Nosepoke 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
visit_data$StartDate <- as.Date(visit_data$StartDate, format = "%Y-%m-%d")
visit_data$DateTime <- as.POSIXct(paste(visit_data$StartDate, visit_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
# Convert input$date_time_rt to Date object (for daily granularity)
#start_date <- as.Date(as.POSIXct(input$date_time_rt))  # ðŸ”¥ key line
start_date <- as.POSIXct("2024-02-26 10:00:00")
# Filter by date after the threshold
visit_data <- visit_data %>% filter(DateTime >= start_date) # DateTime or StartDate
df_inprogress <- visit_data %>%
filter(Module == "SRT" & NosepokeNumber > 0 & CornerCondition == "Correct") %>%
select(Animal, VisitID)
nosepoke_data$StartDate <- as.Date(nosepoke_data$StartDate, format = "%Y-%m-%d")
nosepoke_data$DateTime <- as.POSIXct(paste(nosepoke_data$StartDate, nosepoke_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
## Filter nosepoke data using the same daily threshold
# nosepoke_data <- nosepoke_data %>% filter(StartDate >= start_date)
# ðŸ”½ Add DayNum column: count how many 24-hr blocks since custom start time
nosepoke_data <- nosepoke_data %>%
filter(DateTime >= start_date) %>%
mutate(
DayNum = floor(as.numeric(difftime(DateTime, start_date, units = "days"))) + 1  # Day 1 starts from start_date
) %>%
filter(DayNum >= 1)  # Filter after DayNum assigned
# Filter nosepoke data using the same DayNum threshold
nosepoke_data <- nosepoke_data %>% filter(DayNum >= 1)  # DayNum starts at 1
nosepoke_subset <- nosepoke_data %>%
semi_join(df_inprogress, by = c("Animal", "VisitID")) %>%
select(Animal, VisitID, NosepokeOrder, LickContactTime, DayNum, DateTime) %>%
filter(NosepokeOrder == 1 | NosepokeOrder == 0)
result <- nosepoke_subset %>%
pivot_wider(
id_cols = c(Animal, VisitID, DayNum),
names_from = NosepokeOrder,
values_from = LickContactTime,
names_prefix = "NP_"
) %>%
mutate(
NP_difference = NP_1 - NP_0
) %>%
filter(NP_difference >= 0 & !is.na(NP_difference)) %>%
group_by(Animal, DayNum) %>%
summarize(
Avg_NP_difference = mean(NP_difference, na.rm = TRUE),
.groups = 'drop'
)
View(result)
runApp()
visit_data <- read_delim("~/Desktop/Visit 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
nosepoke_data <- read_delim("~/Desktop/Nosepoke 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
visit_data$StartDate <- as.Date(visit_data$StartDate, format = "%Y-%m-%d")
visit_data$DateTime <- as.POSIXct(paste(visit_data$StartDate, visit_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
# Convert input$date_time_rt to Date object (for daily granularity)
start_date <- as.Date(as.POSIXct(input$date_time_rt))  # ðŸ”¥ key line
visit_data <- read_delim("~/Desktop/Visit 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
nosepoke_data <- read_delim("~/Desktop/Nosepoke 1.txt", delim = "\t", escape_double = FALSE, trim_ws = TRUE)
visit_data$StartDate <- as.Date(visit_data$StartDate, format = "%Y-%m-%d")
visit_data$DateTime <- as.POSIXct(paste(visit_data$StartDate, visit_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
# Convert input$date_time_rt to Date object (for daily granularity)
#start_date <- as.Date(as.POSIXct(input$date_time_rt))  # ðŸ”¥ key line
start_date <- as.Date(as.POSIXct("2024-02-26 10:00:00"))
#start_date <- as.POSIXct("2024-02-26 10:00:00")
# Filter by date after the threshold
visit_data <- visit_data %>% filter(DateTime >= start_date) # DateTime or StartDate
df_inprogress <- visit_data %>%
filter(Module == "SRT" & NosepokeNumber > 0 & CornerCondition == "Correct") %>%
select(Animal, VisitID)
nosepoke_data$StartDate <- as.Date(nosepoke_data$StartDate, format = "%Y-%m-%d")
nosepoke_data$DateTime <- as.POSIXct(paste(nosepoke_data$StartDate, nosepoke_data$StartTime), format = "%Y-%m-%d %H:%M:%OS")
## Filter nosepoke data using the same daily threshold
# nosepoke_data <- nosepoke_data %>% filter(StartDate >= start_date)
# ðŸ”½ Add DayNum column: count how many 24-hr blocks since custom start time
nosepoke_data <- nosepoke_data %>%
filter(DateTime >= start_date) %>%
mutate(
DayNum = floor(as.numeric(difftime(DateTime, start_date, units = "days"))) + 1  # Day 1 starts from start_date
) %>%
filter(DayNum >= 1)  # Filter after DayNum assigned
# Filter nosepoke data using the same DayNum threshold
nosepoke_data <- nosepoke_data %>% filter(DayNum >= 1)  # DayNum starts at 1
nosepoke_subset <- nosepoke_data %>%
semi_join(df_inprogress, by = c("Animal", "VisitID")) %>%
select(Animal, VisitID, NosepokeOrder, LickContactTime, DayNum, DateTime) %>%
filter(NosepokeOrder == 1 | NosepokeOrder == 0)
result <- nosepoke_subset %>%
pivot_wider(
id_cols = c(Animal, VisitID, DayNum),
names_from = NosepokeOrder,
values_from = LickContactTime,
names_prefix = "NP_"
) %>%
mutate(
NP_difference = NP_1 - NP_0
) %>%
filter(NP_difference >= 0 & !is.na(NP_difference)) %>%
group_by(Animal, DayNum) %>%
summarize(
Avg_NP_difference = mean(NP_difference, na.rm = TRUE),
.groups = 'drop'
)
View(result)
start_date
# Convert input$date_time_rt to Date object (for daily granularity)
#start_date <- as.Date(as.POSIXct(input$date_time_rt))  # ðŸ”¥ key line
start_date <- as.POSIXct("2024-02-26 10:00:00")
runApp()
library(rsconnect)
rsconnect::deployApp('/Users/zetristanshi/Desktop/GitHub/MODEL_AD/intellicage_MODELAD')
rsconnect::setAccountInfo(name='zechuanshi',
token='A0F8FC94B3A461E51D666367ABC11B1B',
secret='iCElviKPpmvyt3oOUdAFDiDGVpRTbt+qaOg1jryQ')
library(rsconnect)
rsconnect::deployApp('/Users/zetristanshi/Desktop/GitHub/MODEL_AD/intellicage_MODELAD')
setwd("/Users/zetristanshi/Desktop/GitHub/MODEL_AD/intellicage_MODELAD")
rsconnect::deployApp('/Users/zetristanshi/Desktop/GitHub/MODEL_AD/intellicage_MODELAD')
rsconnect::deployApp(appDir = "/Users/zetristanshi/Desktop/GitHub/MODEL_AD/intellicage_MODELAD",
appPrimaryDoc = "app.R")
getwd(
)
rsconnect::deployApp()
library(rsconnect)
# setwd("/Users/zetristanshi/Desktop/Lab/MODEL_AD/Intellicage_MODELAD")
rsconnect::deployApp('/Users/zetristanshi/Desktop/Lab/MODEL_AD/Intellicage_MODELAD')
# setwd("/Users/zetristanshi/Desktop/Lab/MODEL_AD/Intellicage_MODELAD")
rsconnect::deployApp('/Users/zetristanshi/Desktop/Lab/MODEL_AD/Intellicage_MODELAD')
runApp('Desktop/Lab/MODEL_AD/Intellicage_MODELAD')
# setwd("/Users/zetristanshi/Desktop/Lab/MODEL_AD/Intellicage_MODELAD")
rsconnect::deployApp('/Users/zetristanshi/Desktop/Lab/MODEL_AD/Intellicage_MODELAD')
Sys.Date()
setwd('/Users/zetristanshi/Documents/GitHub/compact')
devtools::document()
library(devtools)
install.packages("devtools")
library(devtools)
