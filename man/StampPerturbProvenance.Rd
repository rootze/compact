% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/CombinePerturbAssays.R
\name{StampPerturbProvenance}
\alias{StampPerturbProvenance}
\title{StampPerturbProvenance: record baseline provenance for a perturb assay}
\usage{
StampPerturbProvenance(
  seurat_obj,
  perturb_assay,
  baseline_assay = "RNA",
  method = "ModulePerturbation",
  overwrite = TRUE
)
}
\arguments{
\item{seurat_obj}{A Seurat object.}

\item{perturb_assay}{Character; name of the perturbation assay to stamp.}

\item{baseline_assay}{Character; baseline assay name used to generate the perturbation.}

\item{method}{Character; description of how the assay was produced.}

\item{overwrite}{Logical; overwrite existing provenance fields.}
}
\value{
Seurat object with provenance written to the assay misc.
}
\description{
This function stores lightweight provenance metadata on a perturbation
assay (e.g. created by \code{ModulePerturbation()}) indicating which
baseline assay and layer(s) it was derived from.
}
\details{
This enables \code{CombinePerturbAssays()} to perform a strict, deterministic
check that all perturbation assays being combined were generated from the
same baseline representation (e.g. baseline assay \code{RNA} vs \code{SCT},
and baseline layer \code{counts}).

Provenance is stored in \code{seurat_obj[[perturb_assay]]@misc$COMPACT} with fields:
\itemize{
\item \code{baseline_assay}
\item \code{baseline_layers} (e.g. \code{"counts"})
\item \code{method}
\item \code{stamped_at}
}
}
